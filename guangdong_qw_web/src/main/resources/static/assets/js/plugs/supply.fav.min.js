/*!
 *
 RongDatePicker - v1.0.0 (2017-09-07T14:44:52+0800)
 *
 zrongs@vip.qq.com
 *
 http://hn.creatoo.cn
 */

var fav = {

    //判断是否传参
    hasParams:function(params){
        if(params){
            return true;
        }else{
            return false;
            rongDialog.init({
                type:1,
                ico:2,
                desc:"参数错误"
            })
        }
    },

    //判断是否收藏
	isFav:function(params,fn){
        var m = this;
        if(m.hasParams(params)){
            dataInit.ajax({
                api:params.api,
                params:params,
                fn:function(data){
                    //已经被收藏，只能取消收藏
                    if(data.code != 0){
                        $('#fav-btn').parent().removeClass('ks-add-Fav').addClass('ks-del-Fav');
                        $('#fav-btn').addClass('icon-collection_fill').removeClass('icon-collection');
                    }else{
                        $('#fav-btn').parent().removeClass('ks-del-Fav').addClass('ks-add-Fav');
                        $('#fav-btn').removeClass('icon-collection_fill').addClass('icon-collection');
                    }
                    var cut  = data.data;
                    if($('#fav-btn').next('span').length > 0){
                        $('#fav-btn').next('span').text(cut);
                    }
                    fn();
                }
            })
        }
    },

    //添加收藏
    addFav:function(params){
        var m = this;
        if(m.hasParams(params)){
            dataInit.ajax({
                api:params.api,
                params:params,
                fn:function(data){
                    if(data.code == 0){
                        rongDialog.init({
                            ico: 1,
                            type: 1,
                            desc: "收藏成功",
                            nextFn:function(){
                                window.location.reload()
                            }
                        })
                    }else{
                        rongDialog.init({
                            ico: 2,
                            type: 1,
                            desc: data.msg || "收藏失败"
                        })
                    }
                }
            })
        }
    },

    //删除收藏
    delFav:function(params){
        var m = this;
        if(m.hasParams(params)){
            dataInit.ajax({
                api:params.api,
                params:params,
                fn:function(data){
                    if(data.code == 0){
                        rongDialog.init({
                            ico: 1,
                            type: 1,
                            desc: "收藏已取消",
                            nextFn:function(){
                                window.location.reload()
                            }
                        })
                    }else{
                        rongDialog.init({
                            ico: 2,
                            type: 1,
                            desc: data.msg || "取消失败"
                        })
                    }
                }
            })
        }
    }
}
